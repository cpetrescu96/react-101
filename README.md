# –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö - Fetching data

üìö –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ:

- [–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é —ç—Ñ—Ñ–µ–∫—Ç–æ–≤](#–ø–æ–ª—É—á–µ–Ω–∏–µ-–¥–∞–Ω–Ω—ã—Ö-—Å-–ø–æ–º–æ—â—å—é-—ç—Ñ—Ñ–µ–∫—Ç–æ–≤)
- [–ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ö—É–∫–∞ useFetch](#–ø—Ä–∏–º–µ—Ä-—Å–æ–∑–¥–∞–Ω–∏—è-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ-—Ö—É–∫–∞-usefetch)

### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

–í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤–∞—à–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: –µ—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ
–∫–∞–∫–æ–π-–ª–∏–±–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫, —Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º–∞ –≤—ã–±–æ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ –±—É–¥–µ—Ç –Ω–∞–º–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ, —á–µ–º –Ω–∞–ø–∏—Å–∞–Ω–∏–µ
—ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –≤—Ä—É—á–Ω—É—é.

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∞ –≤—Ä—É—á–Ω—É—é, –≤–∞—à –∫–æ–¥ –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

```jsx
export const CharacterDetail = ({characterId}) => {
  const [character, setCharacter] = useState(null);

  useEffect(() => {
    const fetchData = async (id) => {
      const response = await fetch(`https://rickandmortyapi.com/api/character/${id}/`);
      const newData = await response.json();
      setData(newData);
    };

    fetchData(characterId);
  }, [characterId]);

  if (character) {
    return <div>{character.name}</div>;
  } else {
    return null;
  }
};
```

–ò—Å–ø–æ–ª—å–∑—É—è —ç—Ç—É —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é, –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–º–µ—Ç–∏—Ç—å —Å—Ç—Ä–∞–Ω–Ω—É—é –≤–µ—â—å: –∏–Ω–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∞ –∏–Ω–æ–≥–¥–∞
–Ω–µ–≤–µ—Ä–Ω—ã–µ –∏–ª–∏ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ.

–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –≤—ã —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å —Å [Race Condition](https://en.wikipedia.org/wiki/Race_condition).

–û–±—ã—á–Ω–æ `—Å–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ–Ω–∫–∏` (–≤ React) –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫–æ–≥–¥–∞ –±—ã–ª–∏ —Å–¥–µ–ª–∞–Ω—ã –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –¥–∞–Ω–Ω—ã–µ, –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç
—Ä–∞–∑–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫–æ–π –∑–∞–ø—Ä–æ—Å –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è –ø–µ—Ä–≤—ã–º.

–í–æ–∑–º–æ–∂–Ω–æ –ø—Ä–∏–º–µ—Ä –æ–ø–∏—Å–∞–Ω–Ω—ã–π –≤—ã—à–µ –±—É–¥–µ—Ç –Ω–µ –æ—á–µ–≤–∏–¥–Ω—ã–º, –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç—É—Ç
üîó [CodeSandbox](https://codesandbox.io/s/beating-async-race-conditions-in-react-forked-v8yfjp?file=/src/CharacterDetail.js).

–î–ª—è —Ä–µ—à–µ–Ω–∏—è –¥–∞–Ω–Ω–æ–π –ø—Ä–æ–±–ª–µ–º—ã –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–¥—Ö–æ–¥–æ–≤, –¥–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –æ–¥–∏–Ω –∏–∑ –Ω–∏—Ö, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç
–ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—á–∏—Å—Ç–∫–∏ —Ö—É–∫–∞ `useEffect`. –ï—Å–ª–∏ –≤–∞—à –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–∂–µ—Ç —Å–¥–µ–ª–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –Ω–æ –Ω—É–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å
—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —ç—Ç–æ–≥–æ –ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ñ–ª–∞–≥.

```jsx
export const CharacterDetail = ({characterId}) => {
  const [character, setCharacter] = useState(null);

  useEffect(() => {
    let active = true;

    const fetchData = async (id) => {
      const response = await fetch(`https://rickandmortyapi.com/api/character/${id}/`);
      const newData = await response.json();

      if (active) {
        setData(newData);
      }
    };

    fetchData(characterId);

    return () => {
      active = false;
    };

  }, [characterId]);

  if (character) {
    return <div>{character.name}</div>;
  } else {
    return null;
  }
};
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `active`, –∫–æ—Ç–æ—Ä–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ–º `true` –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ –∑–Ω–∞—á–µ–Ω–∏–µ `false`
–≤–æ –≤—Ä–µ–º—è –æ—á–∏—Å—Ç–∫–∏. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –≤–∞—à –∫–æ–¥ –Ω–µ –±—É–¥–µ—Ç —Å—Ç—Ä–∞–¥–∞—Ç—å –æ—Ç `—Å–æ—Å—Ç–æ—è–Ω–∏–π –≥–æ–Ω–∫–∏`: —Å–µ—Ç–µ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã –º–æ–≥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –≤
–¥—Ä—É–≥–æ–º –ø–æ—Ä—è–¥–∫–µ, —á–µ–º –≤—ã –∏—Ö –æ—Ç–ø—Ä–∞–≤–∏–ª–∏.

–í—Ç–æ—Ä–æ–π –ø—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å `AbortController` –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π
—Å—Ç–∞—Ç—å–µ
üîó [Fixing Race Conditions in React with useEffect](https://maxrozen.com/race-conditions-fetching-data-react-with-useeffect).

–ï—Å–ª–∏ –≤—ã –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Ä–∞–∑–º–µ—â–∞–µ—Ç–µ –∫–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `useEffect` –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö React,
—ç—Ç–æ
–º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø—Ä–æ–±–ª–µ–º–∞–º:

- –ï—Å–ª–∏ –≤—ã —Ä–∞–∑–º–µ—â–∞–µ—Ç–µ –∫–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏ `useEffect` –≤ –∫–∞–∂–¥–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π —Ç—Ä–µ–±—É–µ—Ç —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ, —ç—Ç–æ
  –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—é –∫–æ–¥–∞.
- –ö–æ–≥–¥–∞ –∫–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ `useEffect`, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–æ–∂–Ω—ã–º, —Ç–∞–∫ –∫–∞–∫ –∫–∞–∂–¥—ã–π —Ä–∞–∑
  –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å.
- –ï—Å–ª–∏ –≤—ã –≤–Ω–µ–∑–∞–ø–Ω–æ —Ä–µ—à–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∏–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
  –¥–∞–Ω–Ω—ã—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, Redux), –≤–∞–º –ø—Ä–∏–¥–µ—Ç—Å—è –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ
  –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –∫–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –±—ã–ª —Ä–∞–∑–º–µ—â–µ–Ω –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ `useEffect`.

–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ, –±–æ–ª–µ–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º –∏ –ª–µ–≥–∫–∏–º –¥–ª—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –ø–æ–¥—Ö–æ–¥–æ–º –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–Ω–µ—Å–µ–Ω–∏–µ –∫–æ–¥–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤
–æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–ª–∏ —Ö—É–∫–∏ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏—Ö –≤–Ω—É—Ç—Ä–∏ `useEffect`. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–¥–µ–ª–∞—Ç—å –∫–æ–¥ –±–æ–ª–µ–µ –º–æ–¥—É–ª—å–Ω—ã–º,
—É–º–µ–Ω—å—à–∏—Ç—å –ø–æ–≤—Ç–æ—Ä—è–µ–º–æ—Å—Ç—å –∏ –æ–±–ª–µ–≥—á–∏—Ç—å –≤–Ω–µ—Å–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π –≤ –±—É–¥—É—â–µ–º.

–≠—Ç–æ—Ç —Å–ø–∏—Å–æ–∫ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–≤ –Ω–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ React. –≠—Ç–æ –ø—Ä–∏–º–µ–Ω–∏–º–æ –∫ –≤—ã–±–æ—Ä–∫–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å –ø–æ–º–æ—â—å—é –ª—é–±–æ–π
–±–∏–±–ª–∏–æ—Ç–µ–∫–∏. –ö–∞–∫ –∏ –≤ —Å–ª—É—á–∞–µ —Å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π, –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ç—Ä–∏–≤–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–∞—á–µ–π, –ø–æ—ç—Ç–æ–º—É —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏
React —Ä–µ–∫–æ–º–µ–Ω–¥—É—é—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–¥—Ö–æ–¥—ã:

- –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö. –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ React
  –∏–º–µ—é—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã –∏ –Ω–µ —Å—Ç—Ä–∞–¥–∞—é—Ç –æ—Ç –≤—ã—à–µ–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫.
- –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏—è –∫—ç—à–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞. –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è —Å
  –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º –≤–∫–ª—é—á–∞—é—Ç [React Query](https://react-query.tanstack.com/), [useSWR](https://swr.vercel.app/) –∏
  [React Router 6.4+](https://reactrouter.com/en/main/start/overview). –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ,
  –∏ –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –≤—ã –±—É–¥–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Effects` ¬´–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º¬ª, –∞ —Ç–∞–∫–∂–µ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤,
  –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–µ—Ç–µ–≤—ã—Ö –≤–æ–¥–æ–ø–∞–¥–æ–≤ (–ø—É—Ç–µ–º –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –ø–æ–≤—ã—à–µ–Ω–∏—è
  —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –¥–∞–Ω–Ω—ã–º –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–æ–≤).

[‚¨Ü Back to Top](#–ø–æ–ª—É—á–µ–Ω–∏–µ-–¥–∞–Ω–Ω—ã—Ö---fetching-data)

### –ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ö—É–∫–∞ useFetch

–ú—ã –º–æ–∂–µ–º –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –¥–≤–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –Ω–∞—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Ö—É–∫–∞ useFetch: –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å –ø–æ–ª—É—á–µ–Ω–Ω—ã–º–∏
–¥–∞–Ω–Ω—ã–º–∏ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—à–∏–±–∫—É –≤ —Å–ª—É—á–∞–µ –Ω–µ—É–¥–∞—á–∏ –∑–∞–ø—Ä–æ—Å–∞. –ö–æ–≥–¥–∞ –∑–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ –∏ –¥–∞–Ω–Ω—ã–µ
–ø–æ–ª—É—á–µ–Ω—ã, –æ–Ω–∏ –±—É–¥—É—Ç –ø–µ—Ä–µ–¥–∞–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É –∏–∑ —ç—Ç–æ–≥–æ —Ö—É–∫–∞. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥–µ—Ç –Ω–µ —Ç–∞–∫, —Ö—É–∫ –≤–µ—Ä–Ω–µ—Ç –æ—à–∏–±–∫—É.

```jsx
import { useState, useEffect } from 'react';

export const useFetch = (uri) => {
  const [data, setData] = useState();
  const [error, setError] = useState();

  useEffect(() => {
    if (!uri) {
      return;
    }

    async function getData(uri) {
      try {
        const response = await fetch(uri);

        if (response?.ok) {
          const data = (await response.json();

          setData(data);
        } else {
          setError(new Error(`Something went wrong...`));
        }
      } catch (error) {
        setError(error);
      }
    }

    void getData(uri);

    return () => {
      setError(undefined);
      setData(undefined);
    };
  }, [uri]);

  return {data, error};
};
```

–í—Å–µ –¥–≤–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Ö—É–∫–∞ `useEffect`. –≠—Ç–æ—Ç —Ö—É–∫ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è `uri`. –ï—Å–ª–∏
`uri` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–±–æ—Ä–∫—É –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è. –ö–æ–≥–¥–∞ uri –µ—Å—Ç—å, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–±–æ—Ä–∫—É. –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å
–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ, –º—ã –ø–µ—Ä–µ–¥–∞–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–π JSON –≤ —Ñ—É–Ω–∫—Ü–∏—é `setData`, –∏–∑–º–µ–Ω—è—è –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –¥–∞–Ω–Ω—ã—Ö. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ
–ø–æ–π–¥–µ—Ç –Ω–µ —Ç–∞–∫, –º—ã –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–¥–∞–¥–∏–º –µ–≥–æ –≤ `setError`, –∫–æ—Ç–æ—Ä—ã–π –∏–∑–º–µ–Ω–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–∞ `error`.

üîó [–°—Å—ã–ª–∫–∞ –Ω–∞ –¥–µ–ø–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –ø—Ä–∏–º–µ—Ä–æ–º –∑–∞–ø—Ä–æ—Å–∞](https://fetch-data-ab1e50.netlify.app)

–ì–æ—Ç–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `src` —Ä–∞–∑–¥–µ–ª–∞ chapter-13.

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–º–µ—Ä–∞ —Å –≥–æ—Ç–æ–≤—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã:

```shell
git clone https://github.com/shopot/react-101.git

git checkout chapter-13

npm install

npm run dev
```

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ç–µ–º–µ:

- üîó [Fetching data with Effects](https://react.dev/reference/react/useEffect#fetching-data-with-effects)
- üîó [Fetching data](https://react.dev/learn/you-might-not-need-an-effect#fetching-data)
- üîó [Fixing Race Conditions with useEffect](https://maxrozen.com/race-conditions-fetching-data-react-with-useeffect)
- üîó [TypeScript useFetch](https://usehooks-ts.com/react-hook/use-fetch)
- üîó [How to fetch data in React with performance in mind](https://www.developerway.com/posts/how-to-fetch-data-in-react)

[‚¨Ü Back to Top](#–ø–æ–ª—É—á–µ–Ω–∏–µ-–¥–∞–Ω–Ω—ã—Ö---fetching-data)

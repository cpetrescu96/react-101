# –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å RTK Query

üìö –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

* [–¢–µ—Ä–º–∏–Ω—ã –∏ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è](#—Ç–µ—Ä–º–∏–Ω—ã-–∏-—Å–æ–≥–ª–∞—à–µ–Ω–∏—è)
* [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ RTK Query](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-rtk-query)
* [–ò–∑ —á–µ–≥–æ —Å–æ—Å—Ç–æ–∏—Ç RTK Query](#–∏–∑-—á–µ–≥–æ-—Å–æ—Å—Ç–æ–∏—Ç-rtk-query)
* [–°–æ–∑–¥–∞–Ω–∏–µ API Slice](#—Å–æ–∑–¥–∞–Ω–∏–µ-api-slice)
* [RTK Query –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Todo](#rtk-query-–Ω–∞-–ø—Ä–∏–º–µ—Ä–µ-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è-todo)
  * [JSON-Server –¥–ª—è Todo REST API](#json-server-–¥–ª—è-todo-rest-api)
  * [–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤](#–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ-–º–∞—Ä—à—Ä—É—Ç–æ–≤-–¥–ª—è-–∑–∞–ø—Ä–æ—Å–æ–≤)
  * [–°–æ–∑–¥–∞–Ω–∏–µ Query endpoint'–∞ - getTodos](#—Å–æ–∑–¥–∞–Ω–∏–µ-query-endpoint–∞---gettodos)
  * [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Query responses —Å –ø–æ–º–æ—â—å—é TransformResponse](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-query-responses-—Å-–ø–æ–º–æ—â—å—é-transformresponse)
  * [–°–æ–∑–¥–∞–Ω–∏–µ Mutation endpoint'–∞ - addTodo](#—Å–æ–∑–¥–∞–Ω–∏–µ-mutation-endpoint–∞---addtodo)
  * [–°–æ–∑–¥–∞–Ω–∏–µ Mutation endpoint'–∞ - deleteTodo](#—Å–æ–∑–¥–∞–Ω–∏–µ-mutation-endpoint–∞---deletetodo-)
  * [–°–æ–∑–¥–∞–Ω–∏–µ Mutation endpoint'–∞ - toggleTodoCompleted](#—Å–æ–∑–¥–∞–Ω–∏–µ-mutation-endpoint–∞---toggletodocompleted)
  * [–≠–∫—Å–ø–æ—Ä—Ç —Ö—É–∫–æ–≤ –∏–∑ API Slice](#—ç–∫—Å–ø–æ—Ä—Ç-—Ö—É–∫–æ–≤-–∏–∑-api-slice)
  * [–î–æ–±–∞–≤–ª–µ–Ω–∏–µ API Slice –≤ Redux Store](#–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ-api-slice-–≤-redux-store-)
  * [–û–±–∑–æ—Ä API Slices: React Hooks](#–æ–±–∑–æ—Ä-api-slices-react-hooks)
  * [–ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö - useGetTodosQuery](#—á—Ç–µ–Ω–∏–µ-–¥–∞–Ω–Ω—ã—Ö---usegettodosquery)
  * [–ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö useDeleteTodoMutation –∏ useToggleTodoCompletedMutation](#–∏–∑–º–µ–Ω–µ–Ω–∏–µ-–¥–∞–Ω–Ω—ã—Ö-usedeletetodomutation-–∏-usetoggletodocompletedmutation)
  * [–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö useAddTodoMutation](#–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ-–¥–∞–Ω–Ω—ã—Ö-useaddtodomutation)

**RTK Query** - —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –≤ —Å–æ—Å—Ç–∞–≤–µ Redux Toolkit, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å —Å–µ—Ç–µ–≤—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏ –≤ Redux-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö. –û–Ω–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π –∏ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å API, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—è actions, reducers –∏ —Ö—É–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏.

## –¢–µ—Ä–º–∏–Ω—ã –∏ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è

- **Redux** - –≠—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π JavaScript, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, npm –ø–∞–∫–µ—Ç `redux`;
- **React Redux** - –≠—Ç–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Å–≤—è–∑—ã–≤–∞–Ω–∏—è Redux —Å React (React UI bindings layer ), npm –ø–∞–∫–µ—Ç `react-redux`, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `<Provider />`;
- **Redux Toolkit (RTK)** - –≠—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏ Redux, npm –ø–∞–∫–µ—Ç `@reduxjs/toolkit`;
- **RTK Query (Redux Toolkit Query)** - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ (data fetching) –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö. –û–Ω –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ø–∏—Å–∞—Ç—å –ª–æ–≥–∏–∫—É –≤—ã–±–æ—Ä–∫–∏ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö;
- **Redux Store** - –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Å—Ç–µ–π—Ç (state) –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Redux –∏–ª–∏ RTK;
- **store** - –≠—Ç–æ –æ–±—ä–µ–∫—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã–π –ø—Ä–∏ –ø–æ–º–æ—â–∏ `configureStore()`, –æ–Ω –∂–µ Redux Store;
- **Action Creator** - –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –¥–µ–π—Å—Ç–≤–∏–π, —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–∑–¥–∞—é—Ç –¥–µ–π—Å—Ç–≤–∏—è (—ç–∫—à–µ–Ω—ã);
- **Thunk-—Ñ—É–Ω–∫—Ü–∏–∏** - —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Redux Store, –æ–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—è (actions) –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∏—Ö –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ;
- **Endpoint** - —ç—Ç–æ –∞–¥—Ä–µ—Å, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –æ—Ç–¥–µ–ª—å–Ω—ã–º HTTP(S) –º–µ—Ç–æ–¥–æ–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö;
- **API Slice (API service "slice")** - –≠—Ç–æ –æ–±—ä–µ–∫—Ç, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –ø—Ä–∏ –ø–æ–º–æ—â–∏ `createApi()`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞–ø—Ä–æ—Å–∞–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ **endpoints**, –≤–∫–ª—é—á–∞–µ—Ç —Å–µ–±—è —Ñ—É–Ω–∫—Ü–∏—é-—Ä–µ–¥—é—Å–µ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏, **middleware** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏ –∫—ç—à–∞ –∏ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏, –∞ —Ç–∞–∫–∂–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –∏ thunk-—Ñ—É–Ω–∫—Ü–∏–∏ —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ **endpoint**;
- **–û–±—ä–µ–∫—Ç API** - —Å–∏–Ω–æ–Ω–∏–º –¥–ª—è **API Slice (API service "slice")**
- **API Slice Utilities** - –≠—Ç–æ —Å–≤–æ–π—Å—Ç–≤–æ `util` –æ–±—ä–µ–∫—Ç–∞ **API Slice**, –∫–æ—Ç–æ—Ä–æ–µ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å–ª—É–∂–µ–±–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–µ—à–µ–º, –≤–∫–ª—é—á–∞—è —Ä—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–µ—à–∞ –∑–∞–ø—Ä–æ—Å–æ–≤, –∑–∞–ø—É—Å–∫ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –≤—ã–±–æ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö, —Ä—É—á–Ω–æ–µ –∞–Ω–Ω—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–≥–æ–≤ –∏ —Ä—É—á–Ω–æ–π —Å–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è API, –∞ —Ç–∞–∫–∂–µ –¥—Ä—É–≥–∏–µ —Å–ª—É–∂–µ–±–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö, –≤–∫–ª—é—á–∞—è SSR;
- **Provider (–ü—Ä–æ–≤–∞–π–¥–µ—Ä)** - –≠—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –≤ –∫–æ—Ç–æ—Ä—ã–π –æ–±–æ—Ä–∞—á–∏–≤–∞—é—Ç –∫–æ—Ä–Ω–µ–≤–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∏ –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫  Redux Store –≤—Å–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ;
- **ApiProvider** - –≠—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –≤ –∫–æ—Ç–æ—Ä—ã–π –æ–±–æ—Ä–∞—á–∏–≤–∞—é—Ç –∫–æ—Ä–Ω–µ–≤–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ **API Slice**, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–æ `<Provider />`;
- **Query endpoint** - –≠—Ç–æ –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∞—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ URL-–∞–¥—Ä–µ—Å–µ, –º–µ—Ç–æ–¥–µ –∑–∞–ø—Ä–æ—Å–∞, –∏ –¥—Ä—É–≥–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (GET) —Å —Å–µ—Ä–≤–µ—Ä–∞;
- **Mutation endpoint** - –≠—Ç–æ –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ URL-–∞–¥—Ä–µ—Å–µ, –º–µ—Ç–æ–¥–µ –∑–∞–ø—Ä–æ—Å–∞, –∏ –¥—Ä—É–≥–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (POST, UPDATE, PATCH, DELETE) –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ;

‚¨Ü [Back to Top](#–∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ-—Å-rtk-query)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ RTK Query

**RTK Query** - —ç—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ (addon), –≤–∫–ª—é—á–µ–Ω–Ω–æ–µ –≤ –ø–∞–∫–µ—Ç Redux Toolkit, –∏ –µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –ø–æ–≤–µ—Ä—Ö –¥—Ä—É–≥–∏—Ö API –≤ Redux Toolkit.

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å RTK Query –æ—Ç–¥–µ–ª—å–Ω–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, –≤—ã –¥–æ–ª–∂–Ω—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `@reduxjs/toolkit`, –∫–æ—Ç–æ—Ä—ã–π –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è RTK Query:

```shell
npm install @reduxjs/toolkit
```

‚¨Ü [Back to Top](#–∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ-—Å-rtk-query)

## –ò–∑ —á–µ–≥–æ —Å–æ—Å—Ç–æ–∏—Ç RTK Query

RTK Query –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è —Å–ª–µ–¥—É—é—â–∏–µ API:

- **createApi()** - –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è RTK Query, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–∞–±–æ—Ä "endpoint'–æ–≤", –∫–æ—Ç–æ—Ä—ã–µ –æ–ø–∏—Å—ã–≤–∞—é—Ç, –∫–∞–∫ –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å –±—ç–∫–µ–Ω–¥-API –∏ –∏–∑ –¥—Ä—É–≥–∏—Ö –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, –≤–∫–ª—é—á–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö. –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞—è—Å—å –ø—Ä–∏–Ω—Ü–∏–ø–∞ "–æ–¥–∏–Ω API slice –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–∞–∑–æ–≤–æ–≥–æ URL";
- **fetchBaseQuery()** - –≠—Ç–æ –Ω–µ–±–æ–ª—å—à–∞—è –æ–±–µ—Ä—Ç–∫–∞ –≤–æ–∫—Ä—É–≥ fetch, –∫–æ—Ç–æ—Ä–∞—è —É–ø—Ä–æ—â–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É –∑–∞–ø—Ä–æ—Å–æ–≤. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–∞—á–µ—Å—Ç–≤–µ `baseQuery()` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `createApi()`;
- **ApiProvider** - –≠—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–æ `<Provider />` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞, –µ—Å–ª–∏ —É –≤–∞—Å –µ—â–µ –Ω–µ—Ç Redux Store –∏ –≤—ã –Ω–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `<Provider />` –∏–∑ `react-redux`;
- **setupListeners()** - –£—Ç–∏–ª–∏—Ç–∞, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –≤–∫–ª—é—á–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ `refetchOnMount` –∏ `refetchOnReconnect`, —ç—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ (refetching) –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏–ª–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É:
  - **refetchOnMount** - –≠—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä —É–∫–∞–∑—ã–≤–∞–µ—Ç, –¥–æ–ª–∂–µ–Ω –ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∏–ª–∏ –ø–æ–¥–ø–∏—Å–∫—É. –ï—Å–ª–∏ refetchOnMount —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ true, —Ç–æ –∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤—Ç–æ—Ä–µ–Ω –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞. –ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ false, —Ç–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å –Ω–µ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏.
  - **refetchOnReconnect** - –≠—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –¥–æ–ª–∂–µ–Ω –ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É (–ø–æ—Å–ª–µ –ø–æ—Ç–µ—Ä–∏ —Å–≤—è–∑–∏). –ï—Å–ª–∏ refetchOnReconnect —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ true, —Ç–æ –∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤—Ç–æ—Ä–µ–Ω –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–≤—è–∑–∏, —á—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ false, —Ç–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å –Ω–µ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –ø–æ—Å–ª–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

## –°–æ–∑–¥–∞–Ω–∏–µ API Slice

API Slice —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤—ã–∑–æ–≤–æ–º —Ñ—É–Ω–∫—Ü–∏–∏ `createApi()`. 

–§—É–Ω–∫—Ü–∏—è `createApi()` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤–∞—à–µ–≥–æ API Slice. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –Ω–∞–∏–±–æ–ª–µ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤–∫–ª—é—á–∞—é—Ç:

- **baseQuery()** - –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä —Ñ—É–Ω–∫—Ü–∏—è, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∞—è, –∫–∞–∫ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `fetchBaseQuery()`, –∫–æ—Ç–æ—Ä–∞—è –∏–¥–µ—Ç –≤ —Å–æ—Å—Ç–∞–≤–µ RTK Query. –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö HTTP-–∫–ª–∏–µ–Ω—Ç–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ `axios` –∏–ª–∏ `fetch`;
- **tagTypes** - –≠—Ç–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ç–µ–≥–æ–≤ –≤ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤, –º—É—Ç–∞—Ü–∏–π –∏ –ø–æ–¥–ø–∏—Å–æ–∫ API Slice. –¢–µ–≥–∏ —è–≤–ª—è—é—Ç—Å—è —Å—Ç—Ä–æ–∫–æ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞—é—Ç—Å—è –∑–∞–ø—Ä–æ—Å–∞–º, –º—É—Ç–∞—Ü–∏—è–º –∏ –ø–æ–¥–ø–∏—Å–∫–∞–º –¥–ª—è –∏—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è;
- **reducerPath** - –≠—Ç–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –±—É–¥–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω –≤–∞—à API service "slice" –≤ –≤–∞—à–µ–º `store`. –ï—Å–ª–∏ –≤—ã –≤—ã–∑—ã–≤–∞–µ—Ç–µ `createApi()` –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑, —Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∫–∞–∂–¥—ã–π —Ä–∞–∑ —É–∫–∞–∑—ã–≤–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤—ã–∑–æ–≤–∞ `cerateApi()`. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ —Ç–æ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ "api";
- **endpoints** - –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π —Å–ø–∏—Å–∫–æ–º –≤–∞—à–∏—Ö endpoint –∑–∞–ø—Ä–æ—Å–æ–≤, –º—É—Ç–∞—Ü–∏–π –∏ –ø–æ–¥–ø–∏—Å–æ–∫.

`createApi()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –≤–∞—à —ç–∫–∑–µ–º–ø–ª—è—Ä RTK Query API –≤ –≤–∏–¥–µ API service "slice". –≠—Ç–æ—Ç –æ–±—ä–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ–ª–µ–∑–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –∏ —Å–≤–æ–π—Å—Ç–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ endpoints, useBaseQuery, useQuery, useMutation, useSubscription –∏ –¥—Ä—É–≥–∏–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –≤–∞–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –≤–∞—à–∏–º–∏ endpoint'–∞–º–∏ –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã, –º—É—Ç–∞—Ü–∏–∏ –∏ –ø–æ–¥–ø–∏—Å–∫–∏.

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –æ–±—ä–µ–∫—Ç RTK Query API —Ç–∞–∫–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ä–µ–¥—é—Å–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤–∞—à–µ–≥–æ –∫—ç—à–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã, –º—É—Ç–∞—Ü–∏–∏ –∏ –ø–æ–¥–ø–∏—Å–∫–∏.

–û–±—â–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–∏ `createApi()` –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```js
const yourApi = createApi({
  reducerPath: 'yourApi',
  baseQuery: fetchBaseQuery({ baseUrl: 'https://example.com/api/v1/' }),
  endpoints: (builder) => ({
    // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤, –º—É—Ç–∞—Ü–∏–π –∏ –ø–æ–¥–ø–∏—Å–æ–∫
  }),
});
```

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ endpoints, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redux Store –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RTK Query API –±—É–¥–µ—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–æ –¥–∞–ª—å—à–µ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Todo.  

‚¨Ü [Back to Top](#–∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ-—Å-rtk-query)

## RTK Query –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Todo

–≠—Ç–æ –≤—Å–µ–≥–æ –ª–∏—à—å –±–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä –≥–¥–µ –±—É–¥–µ—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª RTK Query, –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º RTK Query –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –≤ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://redux-toolkit.js.org/rtk-query/overview).   

### JSON-Server –¥–ª—è Todo REST API

–î–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –±—ç–∫–µ–Ω–¥–∞ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç JSON-Server, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–µ–π–∫–æ–≤–æ–≥–æ RESTful API (API, –∫–æ—Ç–æ—Ä—ã–π —ç–º—É–ª–∏—Ä—É–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ API) –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–∞–π–ª–∞ JSON. 

JSON-Server –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ —á—Ç–µ–Ω–∏—è, –∑–∞–ø–∏—Å–∏, –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (CRUD), –∫–∞–∫ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ –±—ã —Å –Ω–∞—Å—Ç–æ—è—â–∏–º API.

–í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Ç–µ–∫—É—â–µ–π –≤–µ—Ç–∫–∏ –µ—Å—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `./backend`, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∏ –≥–æ—Ç–æ–≤—ã–π –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é JSON-Server —Å –¥–∞–Ω–Ω—ã–º–∏ Todo.

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ –±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Å RESTful API –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–≤–µ –∫–æ–º–∞–Ω–¥—ã:

```shell
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞
npm run backend:install

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
npm run backend:start
```

–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –∑–∞–ø—É—Å–∫–µ –≤—ã —É–≤–∏–¥–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3000:

```shell
> mock-server-api@1.0.0 start
> node server.js

Server is running on: http://localhost:3000
API baseURL: http://localhost:3000/api
```

üöß JSON-Server –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∫–æ–≥–¥–∞ —Ä–µ–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä–Ω—ã–π API –µ—â–µ –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ –Ω–µ –≥–æ—Ç–æ–≤. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –∏–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.

‚ö†Ô∏è JSON-Server –Ω–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å—Ä–µ–¥–∞—Ö, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ –ª–∏—à—å —ç–º—É–ª—è—Ü–∏—è –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ API.

‚¨Ü [Back to Top](#–∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ-—Å-rtk-query)

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤

`baseUrl: http://localhost:3000/api` —ç—Ç–æ –±–∞–∑–æ–≤—ã–π URL –≤–∞—à–µ–≥–æ API.

`endpoint: /todos` —ç—Ç–æ –∫–æ–Ω–µ—á–Ω–∞—è —Ç–æ—á–∫–∞ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º c todo.  

–ó–∞–ø—Ä–æ—Å—ã —Å `endpoint: /todos` –±–¥—É—Ç —Å–ª–µ–¥—É—é—â–∏–µ:

- –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö Todos (–ø–∞–≥–∏–Ω–∞—Ü–∏—è –≤ —Ç–æ–º —á–∏—Å–ª–µ): 
  ```text
  GET     /todos
  GET     /todos?_page=1&limit=10
  ```
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ Todo
  ```text
  POST    /todos
  ```
- –ß–∞—Å—Ç–∏—á–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ Todo (–±—É–¥–µ–º –º–µ–Ω—è—Ç—å –ø–æ–ª–µ completed)
  ```text
  PATCH   /todos/{id}
  ```
- –£–¥–∞–ª–µ–Ω–∏–µ Todo –∏–∑ —Å–ø–∏—Å–∫–∞
  ```text
  DELETE  /todos/{id}
  ```

–ú–µ—Ç–æ–¥ `GET` –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –æ–ø–µ—Ä–∞—Ü–∏—è–º —Ç–∏–ø–∞ **Queries**.

–ú–µ—Ç–æ–¥—ã `POST`, `PATCH` –∏ `DELETE` –æ—Ç–Ω–æ—Å—è—Ç—Å—è  –æ–ø–µ—Ä–∞—Ü–∏—è–º —Ç–∏–ø–∞ **Mutations**.

–¢–æ –µ—Å—Ç—å Todo API Slice –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —á–µ—Ç—ã—Ä–µ –∫–æ–Ω–µ—á–Ω—ã–µ —Ç–æ—á–∫–∏ (endpoints) –≤ –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—Å—è –∑–∞–ø—Ä–æ—Å—ã –∏ –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏.  

‚¨Ü [Back to Top](#–∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ-—Å-rtk-query)

### –°–æ–∑–¥–∞–Ω–∏–µ Query endpoint'–∞ - getTodos

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Query endpoint'–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `createApi()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ `builder.query()`.
–û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ —Å–≤—è–∑–∞—Ç—å –µ–≥–æ —Å –≤–∞—à–∏–º API.

–î–µ–∫–ª–∞—Ä–∞—Ü–∏—è —Ç–∏–ø–∞ `builder.query()` –≤—ã–≥–ª—è–¥–∏—Ç –≤–æ—Ç —Ç–∞–∫:

```ts
query<ResultType, QueryArg>
```

- `ResultType` - –¢–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è;
- `QueryArg` - –¢–∏–ø –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞, –æ–±—ä–µ–∫—Ç –∏–ª–∏ –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–π —Ç–∏–ø, –µ—Å–ª–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –Ω–µ—Ç –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å `void`;

Query endpoint `getTodos`:

```tsx
// src/features/todos/api/todos-api-slice.ts
const TODOS_API_ENDPOINT = '/todos';

export const todosApi = createApi({
  tagTypes: ['Todos'], // –°–ø–∏—Å–æ–∫ —Ç–µ–≥–æ–≤ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö –∏ –º—É—Ç–∞—Ü–∏—è—Ö 

  reducerPath: 'todosApi',

  baseQuery: fetchBaseQuery({ baseUrl: 'http://localhost:3000/api' }),

  endpoints: (build) => ({
    getTodos: build.query<Todo[], void>({
      query: () => `${TODOS_API_ENDPOINT}`,
      providesTags: ['Todos'],
    }),
  }),
});
```

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏ Query endpoint —Å –∏–º–µ–Ω–µ–º `getTodos`.
–í–Ω—É—Ç—Ä–∏ `builder.query()` –º—ã —É–∫–∞–∑–∞–ª–∏ —Å–≤–æ–π—Å—Ç–≤–æ query –∏ –ø–µ—Ä–µ–¥–∞–ª–∏ –≤ –Ω–µ–≥–æ —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Ç—å –∑–∞–ø—Ä–æ—Å–∞ `/todos`.

`builder.query()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ —Å –¥–∞–Ω–Ω—ã–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –∫—ç—à–µ –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–ª—É—á–µ–Ω—ã —á–µ—Ä–µ–∑ —Ö—É–∫–∏ API slice.    

–ü–∞—Ä–∞–º–µ—Ç—Ä `providesTags` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç–æ–ª—å–∫–æ –≤ query endpoints, –æ–Ω –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞–∫–æ–π —Ç–µ–≥ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫—ç—à–∞ –≤ –∑–∞–ø—Ä–æ—Å–µ.

> –¢–µ–≥–∏ - —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –≤ RTK –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –∏—Ö –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏. –ö–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º—É—Ç–∞—Ü–∏–∏, –¥–∞–Ω–Ω—ã–µ, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ —Ç–µ–≥–∞–º–∏, –º–æ–≥—É—Ç –±—ã—Ç—å –∏–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω—ã, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—Ä–æ—Å–µ.

‚¨Ü [Back to Top](#–∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ-—Å-rtk-query)

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Query responses —Å –ø–æ–º–æ—â—å—é TransformResponse

–ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –∏–ª–∏ –º—É—Ç–∞—Ü–∏—è –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä `transformResponse`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –¥–æ —Ç–æ–≥–æ –∫–∞–∫ –æ–Ω–∏ –ø–æ–ø–∞–¥—É—Ç –≤ –∫—ç—à.

–í–æ–∑—å–º–µ–º –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞ (–≤—ã–¥—É–º–∞–Ω–Ω—ã–π –∫–µ–π—Å) –∑–∞–¥–∞—á—É –≤ –∫–æ—Ç–æ—Ä–æ–π –Ω–∞–º —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å –º–∞—Å—Å–∏–≤ todo –≥–¥–µ —É –∫–∞–∂–¥–æ–≥–æ todo –±—É–¥–µ—Ç –æ–±–æ–∑–Ω–∞—á–µ–Ω —Å–ª—É—á–∞–π–Ω—ã–π —Ü–≤–µ—Ç. 

```ts
getTodos: build.query<Todo[], void>({
  query: () => `${TODOS_API_ENDPOINT}`,
  providesTags: ['Todos'],
  transformResponse: (response: Todo[]) => {
    return response.map((todo) => ({ ...todo, color: getRandomColor() }));
  },
})
```

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–¥–∞–Ω–Ω–∞—è –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä `transformResponse`, —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç—Ä–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞:

- `baseQueryReturnValue` - –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞, —Ç–æ –µ—Å—Ç—å —ç—Ç–æ –º–∞—Å—Å–∏–≤ –∏–∑ todo; 
- `meta` - –≠—Ç–æ –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–ø—Ä–æ—Å–µ –∏ endpoint, –≤–∫–ª—é—á–∞—è –∑–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞ –∏ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∑–∞–ø—Ä–æ—Å–∞; 
- `arg` - –≠—Ç–æ –∞—Ä–≥—É–º–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –∑–∞–ø—Ä–æ—Å–∞ –∏–ª–∏ –º—É—Ç–∞—Ü–∏–∏;

–¢–µ–ø–µ—Ä—å –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `getTodos` –≤ –∫—ç—à –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤, –≤ –∫–æ—Ç–æ—Ä–æ–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ todo –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤–æ–µ –ø–æ–ª–µ `color`.    

‚¨Ü [Back to Top](#–∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ-—Å-rtk-query)

### –°–æ–∑–¥–∞–Ω–∏–µ Mutation endpoint'–∞ - addTodo

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Mutation endpoint'–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `createApi()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ `builder.mutation()`.
–û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä (backend).

–î–µ–∫–ª–∞—Ä–∞—Ü–∏—è —Ç–∏–ø–∞ `builder.mutation()` –≤—ã–≥–ª—è–¥–∏—Ç –≤–æ—Ç —Ç–∞–∫:
```ts
mutation<ResultType, QueryArg>
```

- `ResultType` - –¢–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å `unknown`;  
- `QueryArg` - –¢–∏–ø –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞, –æ–±—ä–µ–∫—Ç –∏–ª–∏ –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–π —Ç–∏–ø;


Mutation endpoint `addTodo`:

```ts
addTodo: build.mutation<Todo, Partial<Todo>>({
  query: (todoData) => {
    const newTodo = {
      ...todoData,
      completed: false,
      id: uuidv4(),
    };

    return {
      url: `${TODOS_API_ENDPOINT}`,
      method: 'POST',
      body: newTodo,
    };
  },
  invalidatesTags: ['Todos'],
})
```

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏ Mutation endpoint —Å –∏–º–µ–Ω–µ–º `addTodo`. 
–í–Ω—É—Ç—Ä–∏ `builder.mutation()` –≤—ã –¥–æ–ª–∂–Ω—ã —É–∫–∞–∑–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `query`, –≤ –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞—é—â–∞—è `todoData` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è –æ–±—ä–µ–∫—Ç —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∑–∞–ø—Ä–æ—Å–∞ (URL, –º–µ—Ç–æ–¥ –∏ —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞).

–ê—Ä–≥—É–º–µ–Ω—Ç `todoData` (–Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ) —ç—Ç–æ –æ–±—ä–µ–∫—Ç –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏–º–∏—Ç–∏–≤–Ω–æ–≥–æ —Ç–∏–ø–∞, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω–æ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –º—É—Ç–∞—Ü–∏–∏ –∏ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –≤–∏–¥–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä (backend).  

–í—Ç–æ—Ä—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –º–∞—Å—Å–∏–≤ —Ç–µ–≥–æ–≤ –≤ `invalidatesTags`, –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º—É—Ç–∞—Ü–∏–∏ `addTodo`,
—Ç–µ–≥ —Å –∏–º–µ–Ω–µ–º `"Todos"` –±—É–¥–µ—Ç –∏–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω, —á—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —ç—Ç–∏–º —Ç–µ–≥–æ–º –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—Ä–æ—Å–µ —Å–ø–∏—Å–∫–∞ Todo (`getTodos`).

‚¨Ü [Back to Top](#–∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ-—Å-rtk-query)

### –°–æ–∑–¥–∞–Ω–∏–µ Mutation endpoint'–∞ - deleteTodo 

–°–ª–µ–¥—É—é—â–∞—è –º—É—Ç–∞—Ü–∏—è –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è todo:

```ts
deleteTodo: build.mutation<undefined, string>({
  query(id) {
    return {
      url: `${TODOS_API_ENDPOINT}/${id}`,
      method: 'DELETE',
    };
  },
  invalidatesTags: ['Todos'],
})
```

–ó–∞–ø—Ä–æ—Å `DELETE` –Ω–∞ JSON Server –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç, –∫—Ä–æ–º–µ —Å HTTP Status Code.
–í–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö —Ç–∏–ø–∞ `DELETE` –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ REST API, –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è—Ö 
–≤ —Å–ª—É—á–∞–µ —É—Å–ø–µ—Ö–∞ —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —É–¥–∞–ª–µ–Ω.


### –°–æ–∑–¥–∞–Ω–∏–µ Mutation endpoint'–∞ - toggleTodoCompleted

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–≤–∞ —Å–ø–æ—Å–æ–±–∞ –∏–∑–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è JSON Server):

- –ú–µ—Ç–æ–¥ `UPDATE`, –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–ª—è –æ–±—ä–µ–∫—Ç–∞, –ø–æ—ç—Ç–æ–º—É —Ç—Ä–µ–±—É–µ—Ç –Ω–∞–ª–∏—á–∏—è –≤—Å–µ—Ö –ø–æ–ª–µ–π –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ–ª–µ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ—Ç, —ç—Ç–æ –æ–¥–Ω–∞ –∏–∑ –ø—Ä–∏—á–∏–Ω –ø–æ—á–µ–º—É –¥–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (JSON Server) –Ω–µ –ø–æ–¥—Ö–æ–¥–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω;
- –ú–µ—Ç–æ–¥ `PATCH`, —á–∞—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–ª—è —Ç–æ–ª—å–∫–æ —Ç–µ –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏—à–ª–∏ –≤ –∑–∞–ø—Ä–æ—Å–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä;  

–í –Ω–∞—à–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `toggleTodoCompleted` –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `PATCH` –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –æ–±—ä–µ–∫—Ç 
—Å –æ–¥–Ω–∏–º –ø–æ–ª–µ–º `{ completed: true }` –∏–ª–∏ `{ completed: false }`. 

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è `toggleTodoCompleted` –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–∞ –Ω–∞ `deleteTodo`, —Å —Ç–æ–π –ª–∏—à—å —Ä–∞–∑–Ω–∏—Ü–µ–π, —á—Ç–æ –º—ã –ø–µ—Ä–µ–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–µ—Ç–æ–¥ `PATCH`.

–ö–∞–∫ –∏ –≤ —Å–ª—É—á–∞–µ —Å `deleteTodo`, –ø–æ–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º—É—Ç–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–Ω–æ–≤–∏—Ç—å –∫—ç—à —Å–æ —Å–ø–∏—Å–∫–æ–º todo (`getTodos`), –∏ –∑–¥–µ—Å—å –º—ã –±—É–¥–µ–º
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –ø–æ–¥—Ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **Optimistic Update**.

**Optimistic Update** - —ç—Ç–æ –ø–∞—Ç—Ç–µ—Ä–Ω, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∞–ª–∏–∑—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –º—É—Ç–∞—Ü–∏–∏, –ø—Ä–µ–∂–¥–µ —á–µ–º –ø—Ä–∏–¥–µ—Ç –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞.

Mutation endpoint `toggleTodoCompleted`:

```ts
toggleTodoCompleted: build.mutation<unknown, Pick<Todo, 'id'> & Partial<Todo>>({
  query: ({ id, ...patch }) => ({
    url: `${TODOS_API_ENDPOINT}/${id}`,
    method: 'PATCH',
    body: patch,
  }),
  
  onQueryStarted: ({ id, completed }, { dispatch, queryFulfilled }) => {
    const patchResult = dispatch(
      todosApi.util.updateQueryData('getTodos', undefined, (draft) => {
        const index = draft.findIndex((todo: Todo) => todo.id === id);

        if (index !== -1) {
          draft[index].completed = Boolean(completed);
        }
      })
    );

    queryFulfilled.catch(patchResult.undo);
  },
})
```

–§—É–Ω–∫—Ü–∏—è `onQueryStarted()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º—É—Ç–∞—Ü–∏–∏. 

–ü–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –º—É—Ç–∞—Ü–∏–∏, –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —ç—Ç–æ –æ–±—ä–µ–∫—Ç —Å–æ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ `{ id, completed }`.

–í—Ç–æ—Ä—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –≤ —Ñ—É–Ω–∫—Ü–∏—é –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è API-–æ–±—ä–µ–∫—Ç –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞, —Å–æ–¥–µ—Ä–∂–∞—â–∏–º —Ç–∞–∫–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞, –∫–∞–∫ `dispatch`, `queryFulfilled`, –ø–æ–∑–≤–æ–ª—è—é—â–∏–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ–¥ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∑–∞–ø—Ä–æ—Å–∞, –ø—Ä–∏ –µ–≥–æ —É—Å–ø–µ—à–Ω–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∏ –ø—Ä–∏ —Å–±–æ–µ (—Ç. –µ. –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞/–≤—ã–∑–æ–≤–∞ –º—É—Ç–∞—Ü–∏–∏).

`todosApi.util.updateQueryData` - —É—Ç–∏–ª–∏—Ç–∞ **thunk action creator**, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–∑–¥–∞–µ—Ç –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –Ω–∞–±–æ—Ä –æ–±—ä–µ–∫—Ç–æ–≤ JSON `diff/patch` –∫ —Ç–µ–∫—É—â–µ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é, 
–ø—Ä–∏ –ø–æ–º–æ—â–∏ –Ω–µ–µ –º—ã –¥–µ–ª–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ todo –≤ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ API Slice –∫–æ—Ç–æ—Ä–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –∫—ç—à–µ –∑–∞–ø—Ä–æ—Å–∞ `getTodos`.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º —Ñ—É–Ω–∫—Ü–∏—è `onQueryStarted()` –æ–±–Ω–æ–≤–∏—Ç –∫—ç—à –Ω–µ –¥–æ–∂–∏–¥–∞—è—Å—å –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –∑–∞–ø—Ä–æ—Å, –∞ –≤—ã–∑–æ–≤ `queryFulfilled.catch` —Å–¥–µ–ª–∞–µ—Ç –æ—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –∫—ç—à–∞ –≤ —Å–ª—É—á–∞–µ –µ—Å–ª–∏ –º—É—Ç–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —É—Å–ø–µ—à–Ω–æ, –Ω–æ —Å–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω–µ—Ç –æ—à–∏–±–∫—É.

‚¨Ü [Back to Top](#–∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ-—Å-rtk-query)

### –≠–∫—Å–ø–æ—Ä—Ç —Ö—É–∫–æ–≤ –∏–∑ API Slice

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –≤—ã –æ–ø–∏—Å–∞–ª–∏ –≤—Å–µ –∫–æ–Ω–µ—á–Ω—ã–µ —Ç–æ—á–∫–∏ (endpoints) –≤ `createApi()` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–¥–µ–ª–∞—Ç—å —ç–∫—Å–ø–æ—Ä—Ç —Ö—É–∫–æ–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –º—É—Ç–∞—Ü–∏–π –≤ –≤–∞—à–∏—Ö React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö:

```ts
// src/features/todos/api/todos-api-slice.ts
//...
export const todosApiSlice = createApi({
  //...
});

export const {
  useGetTodosQuery,
  useAddTodoMutation,
  useDeleteTodoMutation,
  useToggleTodoCompletedMutation,
} = todosApiSlice;
```

–≠—Ç–∏ —Ö—É–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–∏—Ö endpoint'–æ–≤ –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –≤–∞—à–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö React.

–ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –Ω–µ–±–æ–ª—å—à–æ–π –æ–±–∑–æ—Ä —Å–ø–∏—Å–∫–∞ —Ö—É–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –¥–ª—è API Slice –∏ –µ–≥–æ endpoint'–æ–≤. 

‚¨Ü [Back to Top](#–∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ-—Å-rtk-query)

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ API Slice –≤ Redux Store  

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–≤–∞ –º–µ—Ç–æ–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è API Slice –≤ Redux Store:

1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ API Slice —á–µ—Ä–µ–∑ ApiProvider –∏–∑ RTK Query, —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –∞–Ω–∞–ª–æ–≥–∏—á–µ–Ω –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é Redux Store —á–µ—Ä–µ–∑ `<Provider />`, —Ç–æ–ª—å–∫–æ –≤–º–µ—Å—Ç–æ `store` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è API Slice:
    ```tsx
    import { ApiProvider } from '@reduxjs/toolkit/query/react';
    import { todosApiSlice } from "./todos-api-slice";
    //..
    <ApiProvider api={todosApiSlice}>
      <App />
    </ApiProvider>
    ```
2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `store` –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å–æ Slice —Å–æ–∑–¥–∞–Ω–Ω—ã–º —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é `createSlice()`:
    ```tsx
    import { combineReducers, configureStore } from '@reduxjs/toolkit';
    import { todosApiSlice } from '@/features/todos';
    
    export const rootReducer = combineReducers({
      [todosApiSlice.reducerPath]: todosApiSlice.reducer,
    });
    
    export const store = configureStore({
      reducer: rootReducer,
      devTools: true, // Defaults to true.
      middleware: (getDefaultMiddleware) => getDefaultMiddleware().concat(todosApiSlice.middleware),
    });
    ```
    –ó–¥–µ—Å—å API Slice, —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–µ–π `createApi()` –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –≤–∏–¥–µ —Ä–µ–¥—é—Å–µ—Ä–∞ –≤ Root Reducer –∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ middleware.

–ü–µ—Ä–≤—ã–π —Å–ø–æ—Å–æ–± –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞–∫–µ—Ç–∞ `react-redux`, —Ç–∞–∫ RTK Query –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ö—É–∫–∏ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑ —ç—Ç–æ–≥–æ –ø–∞–∫–µ—Ç–∞.

–í –∏—Å—Ö–æ–¥–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ Todo, –∫–æ—Ç–æ—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞ –±—É–¥–µ—Ç –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω –≤—Ç–æ—Ä–æ–π —Å–ø–æ—Å–æ–± –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π Redux Store. 

‚¨Ü [Back to Top](#–∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ-—Å-rtk-query)

### –û–±–∑–æ—Ä API Slices: React Hooks

RTK Query –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç React —Ö—É–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–∞—à–µ–≥–æ endpoint'—Ç–∞.

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ API Slice, `createApi()` –±—É–¥–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π —Ö—É–∫
–¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ (Query) –∏–ª–∏ –º—É—Ç–∞—Ü–∏–∏ (Mutation) –∏ –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ –æ–±—ä–µ–∫—Ç endpoint'—Ç–∞ –∫–∞–∫:

- `api.endpoints[endpointName].useQuery` - –¥–ª—è endpoint'—Ç–∞ Query;
- `api.endpoints[endpointName].useMutation` - –¥–ª—è endpoint'—Ç–∞ Mutation;

–¢–∞–∫ –∂–µ RTK Query –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ö—É–∫–∏ –¥–ª—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.  –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ö—É–∫–æ–≤, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤ `createApi()`, –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

- **useQuery** - –î–ª—è endpoint'—Ç–∞ Query, —Ç–∞–∫–∂–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –≤ –æ–±—ä–µ–∫—Ç–µ API (`use[EndpointName]Query`), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —É–¥–∞–ª–µ–Ω–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–∞–º –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –ø–æ–ª—É—á–µ–Ω–Ω—ã–º–∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∑–∞–ø—Ä–æ—Å–æ–≤.;
- **useMutation** - –î–ª—è endpoint'—Ç–∞ Mutation, —Ç–∞–∫–∂–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –≤ –æ–±—ä–µ–∫—Ç–µ API (`use[EndpointName]Mutation`), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –º—É—Ç–∞—Ü–∏–∏ (–∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö) –≤ –≤–∞—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —ç—Ç–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.
- **useQueryState** - –î–ª—è endpoint'—Ç–∞ Query, —Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∑–∞–ø—Ä–æ—Å–∞ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ Redux, –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤—ã–∑—ã–≤–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. –î–∞–Ω–Ω—ã–π —Ö—É–∫ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ä–≤–µ—Ä–∞;
- **useQuerySubscription** - –î–ª—è endpoint'—Ç–∞ Query, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `refetch`. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—ã–±–æ—Ä–∫—É –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ;
- **useLazyQuery** - –î–ª—è endpoint'—Ç–∞ Query, —Ç–∞–∫–∂–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –≤ –æ–±—ä–µ–∫—Ç–µ API (`useLazy[EndpointName]Query`), —Ö—É–∫ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π `useQuery`, –Ω–æ —Å —Ä—É—á–Ω—ã–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –≤—ã –º–æ–∂–µ—Ç–µ —è–≤–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –º–æ–º–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞;
- **useLazyQuerySubscription** - –î–ª—è endpoint'—Ç–∞ Query, —Ö—É–∫ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π `useQuerySubscription`, –Ω–æ —Å —Ä—É—á–Ω—ã–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –≤—ã –º–æ–∂–µ—Ç–µ —è–≤–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –º–æ–º–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞;
- **usePrefetch** - –Ω–µ –∑–∞–≤–∏—Å–∏–º–æ –æ—Ç endpoint (–≤ API Slice), –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ, –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –æ–Ω–∏ –±—É–¥—É—Ç –∑–∞–ø—Ä–æ—à–µ–Ω—ã —è–≤–Ω–æ;

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ö—É–∫–∞ `usePrefetch()`:

```tsx
const App = (): JSX.Element => {
    //...
    const prefetchQuery = todosApi.usePrefetch('getTodos');

    useEffect(() => {
        prefetchQuery();
    }, []);
    //...
}
```
–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–Ω–µ–¥–µ—Ä–∏–Ω–≥–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

–í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ö—É–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ useQuery, —Ç–∞–∫–∏–µ –∫–∞–∫ `useGetTodosQuery`, –±—É–¥—É—Ç –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Ö—É–∫–∞–º–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º–∏ –≤ –≤–∞—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

‚¨Ü [Back to Top](#–∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ-—Å-rtk-query)

### –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö - useGetTodosQuery

RTK Query –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Ö—É–∫, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ñ–æ–Ω–æ–≤—É—é –≤—ã–±–æ—Ä–∫—É –¥–∞–Ω–Ω—ã—Ö, –∞ —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∑–∞–ø—Ä–æ—Å–∞.

–î–ª—è endpoint'–∞  `getTodos` –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω —Ö—É–∫ `useGetTodosQuery`, —ç—Ç–æ—Ç —Ö—É–∫ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Ç–∞–∫–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞, –∫–∞–∫ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ –∑–∞–ø—Ä–æ—Å, –∞ —Ç–∞–∫–∂–µ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –∑–∞–ø—Ä–æ—Å–∞:

- `data` - –ü–æ—Å–ª–µ–¥–Ω–∏–π –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–≥–æ –≤ —Ö—É–∫, –µ—Å–ª–∏ –æ–Ω –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç.
- `currentData` - –ü–æ—Å–ª–µ–¥–Ω–∏–π –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–≥–æ –≤ —Ö—É–∫, –µ—Å–ª–∏ –æ–Ω –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç.
- `error` - –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—à–∏–±–∫–∏, –µ—Å–ª–∏ –æ–Ω–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç.
- `isUninitialized` - –ó–Ω–∞—á–µ–Ω–∏–µ `true` —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –∑–∞–ø—Ä–æ—Å –µ—â–µ –Ω–µ –∑–∞–ø—É—â–µ–Ω.
- `isLoading` - –ó–Ω–∞—á–µ–Ω–∏–µ `true` —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –∑–∞–ø—Ä–æ—Å –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤–ø–µ—Ä–≤—ã–µ –∏ –µ—â–µ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã—Ö.  –≠—Ç–æ –±—É–¥–µ—Ç –≤–µ—Ä–Ω–æ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞, –Ω–æ –Ω–µ –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.
- `isFetching` - –ó–Ω–∞—á–µ–Ω–∏–µ `true` —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –∑–∞–ø—Ä–æ—Å –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è, –Ω–æ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–æ–ª–µ–µ —Ä–∞–Ω–Ω–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.  –≠—Ç–æ –±—É–¥–µ—Ç –≤–µ—Ä–Ω–æ –∫–∞–∫ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞, —Ç–∞–∫ –∏ –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.
- `isSuccess` - –ó–Ω–∞—á–µ–Ω–∏–µ `true` —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –∑–∞–ø—Ä–æ—Å —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.
- `isError` - –ó–Ω–∞—á–µ–Ω–∏–µ `true` —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –∑–∞–ø—Ä–æ—Å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –æ—à–∏–±–∫–∏.
- `refetch` - –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞.

–ü–µ—Ä–≤—ã–π –≤—ã–∑–æ–≤ —Ö—É–∫–∞ `useGetTodosQuery` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç –∑–∞–ø—Ä–æ—Å –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –≤—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –≤—ã–∑–æ–≤—ã –±—É–¥—É—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫—ç—à–∞.
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫—ç—à –∑–∞–ø—Ä–æ—Å–∞ –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è 60 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω –∏–∑ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –Ω–∞ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –∏–∑ Redux Store, —ç—Ç–æ –≤—Ä–µ–º—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä [keepUnusedDataFor](https://redux-toolkit.js.org/rtk-query/api/createApi#keepunuseddatafor).


–õ–∏—Å—Ç–∏–Ω–≥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `<TodoList />` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ö—É–∫–∞ `useGetTodosQuery`:

```tsx
export const TodoList = (): JSX.Element => {
  const { data = [], isLoading, isFetching, isError } = useGetTodosQuery();

  if (isError) {
    return <div>An error has occurred!</div>;
  }

  if (isLoading || isFetching) {
    return <div className={styles.loader}>Loading...</div>;
  }

  const todoList = data.length
    ? data.map((todo) => <TodoItem key={todo.id} todo={todo} />)
    : 'No data!';

  return <div className={styles.todoList}>{todoList}</div>;
};
```
–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã –ø–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è —É—Å–ª–æ–≤–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞. 
–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—ã–∑–æ–≤–µ `useGetTodosQuery()` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏, 
–¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –∫—ç—à–µ.  

–í—ã–∑–æ–≤ —Ö—É–∫–∞ `useGetTodosQuery()` –∏–¥–µ–Ω—Ç–∏—á–µ–Ω –≤—ã–∑–æ–≤—É `todosApi.endpoints.getTodos.useQuery()`. 

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö useDeleteTodoMutation –∏ useToggleTodoCompletedMutation

–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º—É—Ç–∞—Ü–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–≤—É—Ö endpont'—Ç–æ–≤ `deleteTodo` –∏ `toggleTodoCompleted`:

```tsx
// src/features/todos/components/todo-item/todo-item.tsx
//...
export const TodoItem = ({ todo: { id, title, completed, color } }: TodoItemProps): JSX.Element => {
  const [deleteTodo] = useDeleteTodoMutation();
  const [toggleTodoCompleted] = useToggleTodoCompletedMutation();

  const completedClass = completed ? styles.todoTitleThrough : '';

  const handleChange = () => {
    void toggleTodoCompleted({ id, completed: !completed });
  };

  const handleDelete = () => {
    void deleteTodo(id);
  };

  return (
    <div className={styles.todoRow}>
      <div className={styles.todoInputWrapper}>
        <input
          checked={completed}
          onChange={handleChange}
          type="checkbox"
          className={styles.todoInput}
        />
      </div>
      <div className={`${styles.todoTitle} ${completedClass}`} style={{ color }}>
        {title}
      </div>
      <ButtonRemove onCLick={handleDelete} />
    </div>
  );
};
```

–î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º—É—Ç–∞—Ü–∏–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ö—É–∫ —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å endpoint'–æ–º Mutation, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –∏–∑ –¥–≤—É—Ö –æ–±—ä–µ–∫—Ç–æ–≤:

```ts
type UseMutation = (
  options?: UseMutationStateOptions
) => [UseMutationTrigger, UseMutationResult | SelectedUseMutationResult]
```
–ü–µ—Ä–≤—ã–π –æ–±—ä–µ–∫—Ç —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è-—Ç—Ä–∏–≥–≥–µ—Ä, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞.
–í—Ç–æ—Ä–æ–π –æ–±—ä–µ–∫—Ç —ç—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ –∑–∞–ø—Ä–æ—Å–µ –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –æ–ø—Ü–∏–µ–π [selectFromResult](https://redux-toolkit.js.org/rtk-query/usage/queries#selecting-data-from-a-query-result), –≥–¥–µ —ç—Ç–æ –ø—Ä–∏–º–µ–Ω–∏–º–æ.

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –º—É—Ç–∞—Ü–∏—é, –≤—ã –¥–æ–ª–∂–Ω—ã –≤—ã–∑–≤–∞—Ç—å  —Ñ—É–Ω–∫—Ü–∏—é-—Ç—Ä–∏–≥–≥–µ—Ä –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ –Ω–µ–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –¥–ª—è `build.mutation`.

–ù–∞–ø—Ä–∏–º–µ—Ä, endpoint `deleteTodo` –æ–ø–∏—Å—ã–≤–∞–µ—Ç –º—É—Ç–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–¥–∏–Ω —Å—Ç—Ä–æ–∫–æ–≤–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç `id` –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ todo, –∫–æ—Ç–æ—Ä—ã–π —Ç—Ä–µ–±—É–µ—Ç—Å—è —É–¥–∞–ª–∏—Ç—å, —ç—Ç–æ—Ç –∂–µ –∞—Ä–≥—É–º–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è –≤ —Ñ—É–Ω–∫—Ü–∏—é-—Ç—Ä–∏–≥–≥–µ—Ä
`deleteTodo(id)`, –∫–æ—Ç–æ—Ä—É—é –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—ã–∑–æ–≤ —Ö—É–∫–∞ `useDeleteTodoMutation()`.

–ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–º –æ–±—Ä–∞–∑–æ–º —Ä–∞–±–æ—Ç–∞–µ—Ç `useToggleTodoCompletedMutation()`, –≥–¥–µ —Ñ—É–Ω–∫—Ü–∏—è-—Ç—Ä–∏–≥–≥–µ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å —É–∫–∞–∑–∞–Ω–∏–µ–º `id` –∏ —Å–≤–æ–π—Å—Ç–≤–∞ `completed`.

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ—Ç–¥–µ–ª—å–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã —Ö—É–∫–æ–≤ `useMutation` –Ω–µ —Å–≤—è–∑–∞–Ω—ã –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º –∏ –∑–∞–ø—É—Å–∫ –æ–¥–Ω–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –Ω–µ –ø–æ–≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥—Ä—É–≥–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞.  –≠—Ç–æ –ø—Ä–∏–º–µ–Ω–∏–º–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –ª–∏ —Ö—É–∫–∏ –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏–ª–∏ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

RTK Query –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–≤–º–µ—Å—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –º–µ–∂–¥—É —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ —Ö—É–∫–æ–≤ –º—É—Ç–∞—Ü–∏–π —Å –ø–æ–º–æ—â—å—é –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ [fixCacheKey](https://redux-toolkit.js.org/rtk-query/usage/mutations#shared-mutation-results).  –õ—é–±—ã–µ —Ö—É–∫–∏ `useMutation` —Å –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ —Å—Ç—Ä–æ–∫–æ–π `fixCacheKey` –±—É–¥—É—Ç –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –ª—é–±–æ–π –∏–∑ —Ç—Ä–∏–≥–≥–µ—Ä–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π.

‚¨Ü [Back to Top](#–∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ-—Å-rtk-query)

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö useAddTodoMutation

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ todo —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ö—É–∫–∞ `useAddTodoMutation` –∞–Ω–∞–ª–æ–≥–∏—á–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é `useDeleteTodoMutation` –∏ `useToggleTodoCompletedMutation`

```tsx
//...
const [addTodo] = useAddTodoMutation();
//..
const handleClick = (): void => {
  const trimmedValue = title.trim();

  if (trimmedValue) {
    void addTodo({ title: trimmedValue });

    setTitle('');
  }
};
```

–í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ —Å–æ–±—ã—Ç–∏—è –≤—ã –¥–æ–ª–∂–Ω—ã –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é-—Ç—Ä–∏–≥–≥–µ—Ä –∏ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ –Ω–µ–µ —Å—Ç—Ä–æ–∫–æ–≤–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç `title`. 

–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –∑–∞–ø—Ä–æ—Å –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ todo –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω, —Ç–µ–≥ —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å `getTodos` –±—É–¥–µ—Ç –∏–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω, —á—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º—É –∑–∞–ø—É—Å–∫—É –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫—ç—à–∞ —á–µ—Ä–µ–∑ –∑–∞–ø—Ä–æ—Å `getTodos`,
–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ, —Ç–µ–≥ –±—É–¥–µ—Ç –∏–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω –≤ —Å–ª—É—á–∞–µ –∑–∞–ø—É—Å–∫–∞ –º—É—Ç–∞—Ü–∏–∏ `deleteTodo`.

‚¨Ü [Back to Top](#–∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ-—Å-rtk-query)

–ì–æ—Ç–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `./src` —Ç–µ–∫—É—â–µ–π –≤–µ—Ç–∫–∏ _rtk-query_.

–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```shell
git clone https://github.com/shopot/react-101.git

git checkout rtk-query

npm install
````

–î–ª—è –∑–∞–ø—É—Å–∫–∞ JSON Server –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –æ–∫–Ω–µ –∫–æ–Ω—Å–æ–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã:

```shell
npm run backend:install

npm run backend:start
```

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è  Todo –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã:

```shell
npm run dev
```

üìò –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ç–µ–º–µ 

–°—Å—ã–ª–∫–∏ –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:

- üîó [RTK Query Overview](https://redux-toolkit.js.org/rtk-query/overview)
- üîó [createApi](https://redux-toolkit.js.org/rtk-query/api/createApi)
- üîó [Queries](https://redux-toolkit.js.org/rtk-query/usage/queries)
- üîó [Mutations](https://redux-toolkit.js.org/rtk-query/usage/mutations)
- üîó [Prefetching](https://redux-toolkit.js.org/rtk-query/usage/prefetching)
- üîó [Usage With TypeScript](https://redux-toolkit.js.org/rtk-query/usage-with-typescript)

‚¨Ü [Back to Top](#–∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ-—Å-rtk-query)
